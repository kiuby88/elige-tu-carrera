<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/roboto.min.css" rel="stylesheet">
    <link href="css/material-fullpalette.min.css" rel="stylesheet">
    <link href="css/ripples.min.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">



</head>

<body>

<!-- Your site -->

<div class="navbar navbar-inverse navbar-material-blue">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-inverse-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <i class="navbar-brand mdi-social-school">&nbsp;ELIGE TU CARRERA</i>
    </div>
    <!-- <div class="navbar-collapse collapse navbar-inverse-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="about.html">About us</a></li>
            </ul>
        </div>
    -->
</div>

<div class="container">

    <div class="jumbotron">
        <h2>Orientador virtual</h2>
        <hr>
        <h3>Esta herramienta te ayudará a obtener una idea más clara sobre cual puede ser una buena opción de cara a orientar tu futuro profesional.</h3>

        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4">
                <div class="well infobox">
                    <div class="thumbnail">
                        <img class="img-responsive img-rounded" alt="Exam" src="img/selectividad.png">
                    </div>
                    <div class="caption">
                        Aprueba sin problemas
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4">
                <div class="well infobox">
                    <div class="thumbnail">
                        <img class="img-responsive img-rounded" alt="University" src="img/universidad.png">
                    </div>
                    <div class="caption">
                        ¡Estudia algo que te gusta!
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4">
                <div class="well infobox">
                    <div class="thumbnail">
                        <img class="img-responsive img-rounded" alt="Success"src="img/exito.png">
                    </div>
                    <div class="caption">
                        ¡Prepárate para triunfar!
                    </div>
                </div>
            </div>
        </div>

        <p><button type="button" class="btn btn-primary btn-lg btn-material-blue-A700" data-toggle="modal" data-target="#form-modal"><strong>Rellena tus datos</strong></button></p>

    </div>
</div>

<div class="modal flip-container" id="form-modal" tabindex="-1" role="dialog" aria-labelledby="form-modal-label">
    <div class="modal-dialog">
        <div class="flipper">
            <div class="modal-content front">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h1 class="modal-title" id="form-modal-label">Información del candidato</h1>
                    <p>Por favor completa el formulario para que podamos ayudarte en tu elección<p>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <form class="col-lg-12 form-horizontal" id="form">
                            <fieldset>
                                <div class="col-lg-7 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <h3>Gustos personales</h3>
                                        <div class="col-lg-11">
                                            <div class="checkbox">
                                                <p>Humanidades y letras</p>
                                                <label><input type="checkbox" name="Historia">&nbsp;Historia&nbsp;</label>
                                                <label><input type="checkbox" name="Redaccion">&nbsp;Redacción&nbsp;</label>
                                                <label><input type="checkbox" name="Languajes">&nbsp;Idiomas&nbsp;</label>
                                                <label><input type="checkbox" name="Lectura">&nbsp;Lectura&nbsp;</label>
                                                <label><input type="checkbox" name="Politica">&nbsp;Política&nbsp;</label>
                                                <p><br>Arte y trabajos manuales&nbsp;</p>
                                                <label><input type="checkbox" name="Manualidades">&nbsp;Manualidades&nbsp;</label>
                                                <label><input type="checkbox" name="Musica">&nbsp;Música&nbsp;</label>
                                                <label><input type="checkbox" name="Bricolaje"  >&nbsp;Bricolaje&nbsp;</label>
                                                <p><br>Ciencia y análisis</p>
                                                <label><input type="checkbox" name="Calculo">&nbsp;Cálculo&nbsp;</label>
                                                <label><input type="checkbox" name="Inicio">&nbsp;Economía&nbsp;</label>
                                                <label><input type="checkbox" name="Ciencia">&nbsp;Ciencia&nbsp;</label>
                                                <label><input type="checkbox" name="Tecnologia">&nbsp;Tecnología&nbsp;</label>
                                                <label><input type="checkbox" name="Biologia">&nbsp;Biología&nbsp;</label>
                                                <label><input type="checkbox" name="Puzzles">&nbsp;Puzzles&nbsp;</label>
                                                <p><br>Actividades durante el tiempo libre&nbsp;</p>
                                                <label><input type="checkbox" name="Videojuegos">&nbsp;Videojuegos&nbsp;</label>
                                                <label><input type="checkbox" name="Deportes">&nbsp;Deportista&nbsp;</label>
                                                <label><input type="checkbox" name="Peliculas">&nbsp;Cine&nbsp;</label>
                                                <label><input type="checkbox" name="Gastronomia">&nbsp;Gastronomía&nbsp;</label>
                                                <label><input type="checkbox" name="Viajar">&nbsp;Viajes&nbsp;</label>
                                                <label><input type="checkbox" name="Animales">&nbsp;Animales&nbsp;</label>
                                                <label><input type="checkbox" name="Internet">&nbsp;Internet&nbsp;</label>
                                                <p><br>Cualidades personales</p>
                                                <label><input type="checkbox" name="Creatividad">&nbsp;Creativo/a&nbsp;</label>
                                                <label><input type="checkbox" name="Liderazgo">&nbsp;Liderazgo&nbsp;</label>
                                                <label><input type="checkbox" name="Don_de_gentes">&nbsp;Don de gentes&nbsp;</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-5 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <h3>Estudios previos</h3>
                                        <div class="col-lg-10">
                                            <select class="form-control" style="background-image: linear-gradient(#2196f3,#2196f3),linear-gradient(#d2d2d2,#d2d2d2);" id="select-estudios-previos" name="Estudios_previos">
                                                <option value="Bach_humanidades">Bachiller de Humanidades</option>
                                                <option value="Bach_tecnologico">Bachiller Tecnológico</option>
                                                <option value="Bach_artes">Bachiller de Artes</option>
                                                <option value="Bach_salud">Bachiller de Salud</option>
                                                <option value="Bach_sociales">Bachiller de Sociales</option>
                                                <option value="Ciclo_superior">Ciclo Superior</option>
                                            </select>
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <h3>Nota media</h3>
                                        <div class="col-lg-10">
                                            <select class="form-control" style="background-image: linear-gradient(#2196f3,#2196f3),linear-gradient(#d2d2d2,#d2d2d2);" id="select-puntuacion-media" name="Nota_media_expediente">
                                                <option value="Aprobado">Aprobado</option>
                                                <option value="Notable">Notable</option>
                                                <option value="Sobresaliente">Sobresaliente</option>
                                                <option value="Matricula">Matrícula</option>
                                            </select>
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <h3>Salario</h3>
                                        <div class="col-lg-10">
                                            <select class="form-control" style="background-image: linear-gradient(#2196f3,#2196f3),linear-gradient(#d2d2d2,#d2d2d2);" id="select-trabajo-y-salario" name="Salario">
                                                <option value="Bajo">Bajo</option>
                                                <option value="Medio">Medio</option>
                                                <option value="Alto">Alto</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <h3>Necesidad de tiempo libre</h3>
                                        <div class="col-lg-10">
                                            <select class="form-control" style="background-image: linear-gradient(#2196f3,#2196f3),linear-gradient(#d2d2d2,#d2d2d2);" id="select-tiempo-libre" name="Tiempo_libre">
                                                <option value="Bajo">Baja</option>
                                                <option value="Medio">Media</option>
                                                <option value="Alto">Alta</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <h3>Capacidad de esfuerzo</h3>
                                        <div class="col-lg-10">
                                            <select class="form-control" style="background-image: linear-gradient(#2196f3,#2196f3),linear-gradient(#d2d2d2,#d2d2d2);" id="select-dificultad" name="Dificultad">
                                                <option value="Alto">Baja</option>
                                                <option value="Medio">Media</option>
                                                <option value="Bajo">Alta</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <h3>Organización del Trabajo</h3>
                                        <div class="col-lg-10">
                                            <select class="form-control" style="background-image: linear-gradient(#2196f3,#2196f3),linear-gradient(#d2d2d2,#d2d2d2);" id="select-tipo-trabajo" name="Organizacion_del_trabajo">
                                                <option value="Trabajo_individual">Trabajo individual</option>
                                                <option value="Trabajo_en_grupo">Trabajo en grupo</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary btn-material-blue-A700" onClick="obtainResults()">Obtener recomendación</button>
                </div>
            </div>

            <div class="modal-content back">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h1 class="modal-title" id="result-modal">Resultados de la prueba</h1>
                    <p>Según nuestros cálculos estas son las titulaciones recomendadas para ti:<p>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-10 col-lg-offset-1" id="result-modal-table-container">

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-material-blue-A700" onClick="clearForm()">Empezar de nuevo</button>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

<script src="js/ripples.min.js"></script>
<script src="js/material.min.js"></script>
<script src="js/jquery.nouislider.all.min.js"></script>


<script>

    $(document).ready(function() {
        $.material.init();
        $("#slider-puntuacion-media").noUiSlider({
            start: 7,
            connect: "lower",
            range: {
                'min': 4,
                'max': 10
            }
        });
        $('#slider-puntuacion-media').Link('lower').to($('#slider-puntuacion-media-value'));
        $("#slider-edad").noUiSlider({
            start: 19,
            connect: "lower",
            step : 1,
            range: {
                'min': 16,
                'max': 110
            },
            format: wNumb({
                decimals: 0,
                thousand: '.'
            })
        });
        $('#slider-edad').Link('lower').to($('#slider-edad-value'));


        $('#form-modal').on('hidden.bs.modal', function () {
            clearForm();
        })
    });

    var flipped = false;
    function flipModal(){
        document.querySelector("#form-modal").classList.toggle("flip")
        flipped = !flipped;
    }


    function obtainResults(){

        var values = $('#form').serialize();

        // Replace checkbox status with SI
        values = values.split("on").join("SI");
        console.log(values);
        $.get("career?"+values, function(result){

            var tableHTML = "<table class=\"table table-condensed\">"
            tableHTML += "<thead><tr><td>#</td><td>Carrera</td><td>Probabilidad</td></tr></thead>";
            tableHTML += "<tbody>";

            $.each(result, function(index, career){
                if(index == 0){
                    tableHTML += "<tr class=\"success\">";
                } else {
                    tableHTML += "<tr>";
                }
                tableHTML += "<td>" + (index+1) + " </td><td>" + career.profession + "</td><td>"+ career.probability + "</td></tr>"
            });

            tableHTML += "</tbody>";
            tableHTML += "</table>";

            $("#result-modal-table-container").html(tableHTML);
        })

        flipModal();
    }

    function clearForm(){
        document.getElementById("form").reset();


        if(flipped){
            flipModal();
        }
    }

</script>

</body>

</html>
